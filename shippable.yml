language: scala
scala:
- 2.11.8

jdk:
- oraclejdk8

env:
  global:
    - secure: ujjb//TrebgFRWibElyF4rU76c1OYQc51k4y3GQVcXtuhi44BTqdva+vpU5L+PNISp1SotrElxWlS+901mGV3Sm+5qyHOssvNUDua2WqJUtThh7pIAlbfk+vQqq03Kmkga5OaXZvv0aIW/NtVg0GyFIoDnBk7U3T9r/tmKQPFYqfoMIRBhKnu96bYtUJ8/hW1VagY0b4GbGIFlOE+6glVdDnGbEdtUxIuR2Ti3pB3JAoYVw0Egxx/KVX13Ji30nypeHPxWT86V/LEG7JTurSOfj5wciwJNaEMuezXXDC8bfs3QartpaQ8aTAnmN0mi/VbdMpBzEyUbvf8JM2FIcwcg==

build:
  pre_ci_boot:
    image_name: kpmeen/docker-clammyscan-builder
    image_tag: latest
    pull: true
    options: "-e HOME=/root"

  ci:
    # Start clamav
    - /bootstrap.sh
    # Build the project
    - sbt clean coverage test coverageReport codacyCoverage

  post_ci:
    # Prepare for exporting coverage report to codacy
    - mkdir -p shippable/codecoverage
    - mv target/scala-2.11/coverage-report/cobertura.xml $PWD/shippable/codecoverage/


